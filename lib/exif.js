const a3_0x34acce=a3_0x26fd;(function(_0x4b908c,_0x3d43a1){const _0x421deb=a3_0x26fd,_0x418d0f=_0x4b908c();while(!![]){try{const _0x4b88c1=-parseInt(_0x421deb(0x1e2))/0x1+parseInt(_0x421deb(0x207))/0x2*(parseInt(_0x421deb(0x202))/0x3)+-parseInt(_0x421deb(0x1dc))/0x4*(parseInt(_0x421deb(0x204))/0x5)+-parseInt(_0x421deb(0x208))/0x6*(parseInt(_0x421deb(0x1fa))/0x7)+parseInt(_0x421deb(0x1e6))/0x8+parseInt(_0x421deb(0x1f5))/0x9+parseInt(_0x421deb(0x1fd))/0xa;if(_0x4b88c1===_0x3d43a1)break;else _0x418d0f['push'](_0x418d0f['shift']());}catch(_0x40fe59){_0x418d0f['push'](_0x418d0f['shift']());}}}(a3_0x286c,0x28e56));const {modul}=require(a3_0x34acce(0x1f9)),{crypto,fs,ffmpeg,path,os,webp}=modul,{tmpdir}=os;function a3_0x286c(){const _0x463b8a=['load','from','130570wiOaSE','save','-an','unlinkSync','1102472AcoXzF','concat','packname','-loop','test','mimetype','-vf','utf-8','scale=\x27min(320,iw)\x27:min\x27(320,ih)\x27:force_original_aspect_ratio=decrease,fps=15,\x20pad=320:320:-1:-1:color=white@0.0,\x20split\x20[a][b];\x20[a]\x20palettegen=reserve_transparent=on:transparency_color=ffffff\x20[p];\x20[b][p]\x20paletteuse','data','join','randomBytes','author','categories','-vcodec','2754936LBBFgs','-ss','length','toFormat','../module','679GQlexW','writeUIntLE','default','1874750oBpfKI','.mp4','addOutputOptions','end','libwebp','339hhqIZj','00:00:05','239930iIwdki','writeFileSync','.jpg','734xDnXdN','20214iBDjrl','.webp','00:00:00','Image','toString','exports','stringify','readUIntLE','error','exif','4IxjPQz','webp','https://github.com/KirBotz','-vsync'];a3_0x286c=function(){return _0x463b8a;};return a3_0x286c();}async function imageToWebp(_0x5e0c6b){const _0x59a168=a3_0x34acce,_0x114709=path[_0x59a168(0x1f0)](tmpdir(),crypto[_0x59a168(0x1f1)](0x6)['readUIntLE'](0x0,0x6)[_0x59a168(0x1d6)](0x24)+_0x59a168(0x209)),_0x380888=path[_0x59a168(0x1f0)](tmpdir(),crypto['randomBytes'](0x6)[_0x59a168(0x1d9)](0x0,0x6)['toString'](0x24)+_0x59a168(0x206));fs[_0x59a168(0x205)](_0x380888,_0x5e0c6b),await new Promise((_0x1d58c9,_0x544782)=>{const _0xb71222=_0x59a168;ffmpeg(_0x380888)['on'](_0xb71222(0x1da),_0x544782)['on'](_0xb71222(0x200),()=>_0x1d58c9(!![]))[_0xb71222(0x1ff)]([_0xb71222(0x1f4),_0xb71222(0x201),_0xb71222(0x1ec),'scale=\x27min(320,iw)\x27:min\x27(320,ih)\x27:force_original_aspect_ratio=decrease,fps=15,\x20pad=320:320:-1:-1:color=white@0.0,\x20split\x20[a][b];\x20[a]\x20palettegen=reserve_transparent=on:transparency_color=ffffff\x20[p];\x20[b][p]\x20paletteuse'])[_0xb71222(0x1f8)](_0xb71222(0x1dd))['save'](_0x114709);});const _0x4da305=fs['readFileSync'](_0x114709);return fs[_0x59a168(0x1e5)](_0x114709),fs['unlinkSync'](_0x380888),_0x4da305;}async function videoToWebp(_0x2d33b6){const _0x39f62f=a3_0x34acce,_0x5ffe6c=path[_0x39f62f(0x1f0)](tmpdir(),crypto[_0x39f62f(0x1f1)](0x6)[_0x39f62f(0x1d9)](0x0,0x6)['toString'](0x24)+_0x39f62f(0x209)),_0x5a5013=path[_0x39f62f(0x1f0)](tmpdir(),crypto[_0x39f62f(0x1f1)](0x6)['readUIntLE'](0x0,0x6)['toString'](0x24)+_0x39f62f(0x1fe));fs[_0x39f62f(0x205)](_0x5a5013,_0x2d33b6),await new Promise((_0x1fba5b,_0x51da05)=>{const _0x21a4e2=_0x39f62f;ffmpeg(_0x5a5013)['on'](_0x21a4e2(0x1da),_0x51da05)['on'](_0x21a4e2(0x200),()=>_0x1fba5b(!![]))[_0x21a4e2(0x1ff)]([_0x21a4e2(0x1f4),_0x21a4e2(0x201),_0x21a4e2(0x1ec),_0x21a4e2(0x1ee),_0x21a4e2(0x1e9),'0',_0x21a4e2(0x1f6),_0x21a4e2(0x1d4),'-t',_0x21a4e2(0x203),'-preset',_0x21a4e2(0x1fc),_0x21a4e2(0x1e4),_0x21a4e2(0x1df),'0'])['toFormat']('webp')[_0x21a4e2(0x1e3)](_0x5ffe6c);});const _0x10ea60=fs['readFileSync'](_0x5ffe6c);return fs[_0x39f62f(0x1e5)](_0x5ffe6c),fs[_0x39f62f(0x1e5)](_0x5a5013),_0x10ea60;}async function writeExifImg(_0x258974,_0x1d4351){const _0x327508=a3_0x34acce;let _0x3e9b69=await imageToWebp(_0x258974);const _0x26f34a=path[_0x327508(0x1f0)](tmpdir(),crypto[_0x327508(0x1f1)](0x6)[_0x327508(0x1d9)](0x0,0x6)[_0x327508(0x1d6)](0x24)+_0x327508(0x209)),_0x4c1785=path['join'](tmpdir(),crypto['randomBytes'](0x6)[_0x327508(0x1d9)](0x0,0x6)['toString'](0x24)+_0x327508(0x209));fs['writeFileSync'](_0x26f34a,_0x3e9b69);if(_0x1d4351[_0x327508(0x1e8)]||_0x1d4351['author']){const _0x29833c=new webp[(_0x327508(0x1d5))](),_0xcbf952={'sticker-pack-id':_0x327508(0x1de),'sticker-pack-name':_0x1d4351['packname'],'sticker-pack-publisher':_0x1d4351['author'],'emojis':_0x1d4351[_0x327508(0x1f3)]?_0x1d4351[_0x327508(0x1f3)]:['']},_0xe30a4e=Buffer[_0x327508(0x1e1)]([0x49,0x49,0x2a,0x0,0x8,0x0,0x0,0x0,0x1,0x0,0x41,0x57,0x7,0x0,0x0,0x0,0x0,0x0,0x16,0x0,0x0,0x0]),_0x533781=Buffer[_0x327508(0x1e1)](JSON['stringify'](_0xcbf952),_0x327508(0x1ed)),_0x22e546=Buffer[_0x327508(0x1e7)]([_0xe30a4e,_0x533781]);return _0x22e546[_0x327508(0x1fb)](_0x533781[_0x327508(0x1f7)],0xe,0x4),await _0x29833c[_0x327508(0x1e0)](_0x26f34a),fs[_0x327508(0x1e5)](_0x26f34a),_0x29833c[_0x327508(0x1db)]=_0x22e546,await _0x29833c['save'](_0x4c1785),_0x4c1785;}}function a3_0x26fd(_0x285b11,_0x236730){const _0x286c34=a3_0x286c();return a3_0x26fd=function(_0x26fdb3,_0x36ea1f){_0x26fdb3=_0x26fdb3-0x1d4;let _0x58d813=_0x286c34[_0x26fdb3];return _0x58d813;},a3_0x26fd(_0x285b11,_0x236730);}async function writeExifVid(_0x570e00,_0x2019af){const _0x40cd73=a3_0x34acce;let _0x5a3f7d=await videoToWebp(_0x570e00);const _0x233a2f=path[_0x40cd73(0x1f0)](tmpdir(),crypto[_0x40cd73(0x1f1)](0x6)['readUIntLE'](0x0,0x6)['toString'](0x24)+_0x40cd73(0x209)),_0xbca7d4=path[_0x40cd73(0x1f0)](tmpdir(),crypto[_0x40cd73(0x1f1)](0x6)[_0x40cd73(0x1d9)](0x0,0x6)[_0x40cd73(0x1d6)](0x24)+_0x40cd73(0x209));fs['writeFileSync'](_0x233a2f,_0x5a3f7d);if(_0x2019af[_0x40cd73(0x1e8)]||_0x2019af[_0x40cd73(0x1f2)]){const _0x4e1f69=new webp[(_0x40cd73(0x1d5))](),_0x3bd02e={'sticker-pack-id':'https://github.com/KirBotz','sticker-pack-name':_0x2019af[_0x40cd73(0x1e8)],'sticker-pack-publisher':_0x2019af[_0x40cd73(0x1f2)],'emojis':_0x2019af[_0x40cd73(0x1f3)]?_0x2019af[_0x40cd73(0x1f3)]:['']},_0xef58a1=Buffer[_0x40cd73(0x1e1)]([0x49,0x49,0x2a,0x0,0x8,0x0,0x0,0x0,0x1,0x0,0x41,0x57,0x7,0x0,0x0,0x0,0x0,0x0,0x16,0x0,0x0,0x0]),_0x2abb4d=Buffer['from'](JSON['stringify'](_0x3bd02e),'utf-8'),_0x2642fb=Buffer[_0x40cd73(0x1e7)]([_0xef58a1,_0x2abb4d]);return _0x2642fb[_0x40cd73(0x1fb)](_0x2abb4d[_0x40cd73(0x1f7)],0xe,0x4),await _0x4e1f69[_0x40cd73(0x1e0)](_0x233a2f),fs[_0x40cd73(0x1e5)](_0x233a2f),_0x4e1f69['exif']=_0x2642fb,await _0x4e1f69[_0x40cd73(0x1e3)](_0xbca7d4),_0xbca7d4;}}async function writeExif(_0x4633df,_0x244393){const _0x370383=a3_0x34acce;let _0x2d4d75=/webp/['test'](_0x4633df['mimetype'])?_0x4633df[_0x370383(0x1ef)]:/image/['test'](_0x4633df[_0x370383(0x1eb)])?await imageToWebp(_0x4633df['data']):/video/[_0x370383(0x1ea)](_0x4633df['mimetype'])?await videoToWebp(_0x4633df[_0x370383(0x1ef)]):'';const _0x2c5be9=path[_0x370383(0x1f0)](tmpdir(),crypto['randomBytes'](0x6)[_0x370383(0x1d9)](0x0,0x6)[_0x370383(0x1d6)](0x24)+_0x370383(0x209)),_0x2b3a8a=path[_0x370383(0x1f0)](tmpdir(),crypto[_0x370383(0x1f1)](0x6)['readUIntLE'](0x0,0x6)[_0x370383(0x1d6)](0x24)+_0x370383(0x209));fs[_0x370383(0x205)](_0x2c5be9,_0x2d4d75);if(_0x244393[_0x370383(0x1e8)]||_0x244393[_0x370383(0x1f2)]){const _0x13be3e=new webp[(_0x370383(0x1d5))](),_0x429d04={'sticker-pack-id':_0x370383(0x1de),'sticker-pack-name':_0x244393[_0x370383(0x1e8)],'sticker-pack-publisher':_0x244393[_0x370383(0x1f2)],'emojis':_0x244393[_0x370383(0x1f3)]?_0x244393[_0x370383(0x1f3)]:['']},_0x5410ff=Buffer['from']([0x49,0x49,0x2a,0x0,0x8,0x0,0x0,0x0,0x1,0x0,0x41,0x57,0x7,0x0,0x0,0x0,0x0,0x0,0x16,0x0,0x0,0x0]),_0x21b389=Buffer[_0x370383(0x1e1)](JSON[_0x370383(0x1d8)](_0x429d04),_0x370383(0x1ed)),_0x36b194=Buffer[_0x370383(0x1e7)]([_0x5410ff,_0x21b389]);return _0x36b194[_0x370383(0x1fb)](_0x21b389[_0x370383(0x1f7)],0xe,0x4),await _0x13be3e['load'](_0x2c5be9),fs[_0x370383(0x1e5)](_0x2c5be9),_0x13be3e[_0x370383(0x1db)]=_0x36b194,await _0x13be3e[_0x370383(0x1e3)](_0x2b3a8a),_0x2b3a8a;}}module[a3_0x34acce(0x1d7)]={'imageToWebp':imageToWebp,'videoToWebp':videoToWebp,'writeExifImg':writeExifImg,'writeExifVid':writeExifVid,'writeExif':writeExif};